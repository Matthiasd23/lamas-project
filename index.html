<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyzing the Aces and Eights game Using a Kripke Model</title>
    <link rel="stylesheet" type="text/css" href="index.css">
    <script type="text/javascript" id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$']]
        }
      };
    </script>

</head>

<body>

    <header>
        <h1>Analyzing the Aces and Eights game Using a Kripke Model</h1>
        <p><em>Group 6<br>Matthias Drijfhout, Sharma Dhruvs, Lucas Velvis<br>University of Groningen<br>January 18,
                2024</em></p>
    </header>

    <section>
      <h2>Introduction</h2>
      <p>In the field of epistemic reasoning, the Aces and Eights (<a href="#ref1">Cedegao et al., 2021</a>) riddle is a compelling case study for logicians.
          The following text serves as our report on applying Kripke's reasoning to the puzzle. The puzzle consists of three players, each of which is dealt two of eight cards, 4 aces and 4 eights.
          Out of these, 2 cards are left face down and no player can see their cards but can see the ones dealt to others. Through repeated public announcements (PAs) one of the players is eventually
          able to figure out what hand they were dealt. A Kripke model is applied here, where different states represent the different possibilities of card combinations (worlds $w_i$).
          These worlds are connected via accessibility relations that visualize the players' knowledge. Through repeated PAs, the possible states can be reduced until a player knows their cards, which
          is the case if one of the players has the same (set of) cards in all words she considers possible.</p>

      <h3>Game description</h3>
      <p>
          Before we continue with the detailed game description and its rules, we first establish some common knowledge at the start of the game:
          <ul>
            <li>Every player knows the rules and follows the rules</li>
            <li>No player ever lies</li>
            <li>Every player is a perfect logical reasoner</li>
            <li>These rules are common knowledge</li>
          </ul>
      </p>
      Now that this has been established, we can explain the exact procedure of the game; it starts with 3 players and 8 cards, the latter consisting of 4 aces and 4 eights.
      Next, each player is dealt 2 cards after they are shuffled of course, with the remaining two being put face down on the surface, for example, a table.
      Importantly, no player can see their own cards, but only the cards dealt to other players. In practice this would mean holding your cards in front of you with the backside towards yourself.
      Based on a predetermined order, each one of the players takes turns announcing (public announcements) whether they know the cards dealt to them or not. In our model we will change this,
      by letting all players do their public announcement at the same time. This allows the other players in the game to reason and deduce what cards they have based on what others know,
      and eventually, after repeated rounds of questioning, one of the three players would know what cards they were dealt.
      The puzzle is ingeniously constructed to require the players to use a combination of deductive logic, inference based on others' announcements, and an understanding of knowledge
      ($K_i$) —what they know about their own hand. It can be modeled using Kripke structures, which allows for the representation of possible worlds—each corresponding to a different arrangement
      of cards—and accessibility relations that encapsulate the players' knowledge about these worlds.
    </section>

    <section>
        <h2 id="model">Formal Model</h2>
        <h3>Kripke Model</h3>

        For a formal representation of the problem we use the notation as given by <a href="#ref2">Top et al., 2024</a>. For the Aces and Eights we use $A=\{1,2,3\}$ and $P=\{88_1, A8_1,AA_1,88_2,A8_2,AA_2,88_3,A8_3,AA_3\}$,
        where $88_1$ means `Player 1 holds two eights', and $A8_2$ means `Player 2 holds an eight and an ace' etc.<br>
        The Kripke model is in $S5$ and formulated as follows $M=\langle S,R,V\rangle$.<br>
        Each state $s \in S$ was formulated in a sequential manner from player 1 to 3, with an "A" representing an ace and an "8" representing the 8 card.<br>
        The transitions $R$ for each player in the model connect each state for which the agent's own cards differ and the other agent's cards do not, as this is
        the only uncertainty each agent has. The relations for agent $i$ are $R_i(w,v)$ iff $V(P_j) \in v$ and $V(P_j) \in w$ with $i,j \in A$ and for all $j \neq i$,
        where $P_j$ is player $j$'s hand, e.g. $R_i(w,v)$ exists where $w=A8A8A8$ and $v=AAA8A8$ because $V(A8_2) \in w$ and $V(A8_2) \in v$, $V(A8_3) \in w$ and $V(A8_3) \in v$.<br>

        For example the state in which Player 1 `received an ace and an 8 ($A8_1$), Player 2 received two aces ($AA_2$) and Player 3 received two eights ($88_3$), would be $V(A8_1)\cap V(AA_2) \cap V(88_3)=A8AA88$.<br>
        The total number of initial states was reduced by acknowledging that the card combination 8A results in exactly the same (logical) situation as A8. Therefore, all states with the combination 8A are disregarded,
        as each one is already incorporated by its A8 counterpart, so the order does not matter. This results in 19 possible states. A graph of the resulting model is shown in <a href="#initial-model">Figure 1</a>.
    <figure id="initial-model" style="text-align:center;">
        <img src="visualization/round_1.png" alt="Initial Kripke Model" style="width:50%;">
        <figcaption style="font-size: larger;">Figure 1. The initial Kripke model at the start of the game.</figcaption>
    </figure>


        <p><strong>Clarification Kripke Model:</strong></p>
    <ul>
        <li> The model is in S5, which means it is reflexive, transitive and symmetric.</li>
        <li> Reflexive edges are not drawn.</li>
        <li> Lines are drawn instead of symmetrical edges.</li>
        <li> Note that for some of the transitions around the middle (A8A8A8) state, some transitive edges have become hidden, because of a visualisation issue with the
        used Python library "networkx", which could not be easily resolved.</li>
    </ul>
        <h3>Public Announcement</h3>
        In this problem we have two possible public announcements, one is `I know my cards!' and the other `I do not know my cards!'.
        An agent <i>i</i> can have one of the three card-combinations $88_i, A8_i$ or $AA_i$. Therefore, when an agent knows their cards, the formal notation for agent $i$
        who says `I know my cards!' is given as a disjunction of them knowing one of those cards combinations: $K_i88_i \lor K_iA8_i \lor K_iAA_i$. Agent $i$ knows he has either
        the set $AA$, $A8$ or $88$. The announcement `I do not know my cards!' for agent $i$ is given as the negation of "I know my cards!": $\neg(K_i88_i \lor K_iA8_i \lor K_iAA_i)$.
        Creating simultaneous announcements, however, can lead to unsuccessful announcements, where the announcement becomes untrue after applying the public announcement to the model.

        <h4>Informal Explanation</h4>
        Whenever all agents announce "I don't know" simultaneously, all states that do not have outgoing transitions to another state for every player should be removed,
        because those states are no longer possibilities. Why that is, we will explain with a short example (based on the example provided by <a href="#ref1">Cedegao et al., 2021</a>):
        Suppose the actual state is AAA888. In Round 1, each player has to announce "I don't know", because (as you can see in the top-right corner of <a href="#initial-model">Figure 1</a>)
        AAA888 has outgoing non-reflexive transitions for every player, which illustrates that all players cannot rule those connected states out. Therefore, when
        "I don't know" is announced, the graph is updated by every player by eliminating all states that do not have outgoing transitions for all players. Because,
        if one of those states had been the true state, the player with no outgoing transitions would then have known their cards.

        <h4>Formal Implication</h4>
        Given <i>M</i> as defined previously (in <a href="#model">Section Formal Model</a>) and any state $v$ $ \in S$, if agent <i>i</i>  ($\in A$),(announces "I don't know", that is
        equivalent to the following formal statement (and the subsequent equivalences):<br>

        <div>
        $$
        \begin{flalign*}
            &(M, v) \models \neg (K_iAA_i \lor K_iA8_i \lor K_i88_i) && \Leftrightarrow \text{De Morgan} &\\
            &(M, v) \models \neg K_iAA_i \land \neg K_iA8_i \land \neg K_i88_i  && \Leftrightarrow \text{Definition of "}\land\text{''} &\\
            &(M, v) \not\models K_iAA_i \text{ and } (M, v) \not\models K_iA8_i \text{ and } (M, v) \not\models K_i88_i &&
        \end{flalign*}
        $$
        </div>


    </section>

    <section>
        <h2>Riddle Implementation</h2>

        <!-- ... (Continue with the riddle implementation content) -->

    </section>

    <section>
        <h2>Results</h2>

        <!-- ... (Continue with the results content) -->

    </section>

    <section>
        <h2>Discussion and Conclusion</h2>

        <!-- ... (Continue with the discussion and conclusion content) -->

    </section>

    <section>
    <h2>References</h2>
    <ol>
        <li id="ref1">Cedegao, Z., Ham, H., & Holliday, W. H. (2021). <em>Does Amy know Ben knows you know your cards? A computational model of higher-order epistemic reasoning.</em> In Proceedings of the 43rd Annual Meeting of the Cognitive Science Society (pp. 2588-2594).</li>
        <li id="ref2">Top, J. D., Jonker, C., Verbrugge, R., & de Weerd, H. (2024). <em>Predictive Theory of Mind Models Based on Public Announcement Logic.</em> In N. Gierasimczuk & F. R. Velázquez-Quesada (Eds.), Dynamic Logic. New Trends and Applications (pp. 85-103). Cham: Springer Nature Switzerland. ISBN 978-3-031-51777-8.</li>
    </ol>
    </section>


</body>

</html>
